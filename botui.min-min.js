!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],function(){return t.BotUI=e(t)}):t.BotUI=e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";return function(e,n){function o(t,e,n,o){return"<a class='botui-message-content-link' target='"+(o?"blank":"")+"' href='"+n+"'>"+e+"</a>"}function i(t){return t.replace(g.image,"<img class='botui-message-content-image' src='$2' alt='$1' />").replace(g.icon,"<i class='botui-icon botui-message-content-icon fa fa-$1'></i>").replace(g.link,o)}function s(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,e&&(n.onload=e),document.body.appendChild(n)}function a(t){y.action.addMessage&&p.message.human({delay:100,content:t}),y.action.show=!y.action.autoHide}function c(t){if(!t.content)throw Error('BotUI: "content" is required in message object.');t.type=t.type||"text",t.visible=!t.delay;var e=y.messages.push(t)-1;return new Promise(function(n,o){setTimeout(function(){y.messages[e].visible=!0,n(e)},t.delay||0)})}function u(t){return"string"==typeof t&&(t={content:t}),t||{}}function r(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function l(t){if(!t.action)throw Error('BotUI: "action" property is required.')}function d(t){return l(t),r({type:"text",cssClass:"",id:"",autoHide:!0,addMessage:!0},t),y.action.type=t.type,y.action.cssClass=t.cssClass,y.action.id=t.id,y.action.autoHide=t.autoHide,y.action.addMessage=t.addMessage,new Promise(function(e,n){v=e,setTimeout(function(){if(y.action.show=!0,"location"==y.action.text.id)var t=setInterval(function(){if(document.getElementById("location")){clearInterval(t);var e=document.getElementById("location"),n={types:["(cities)"]},o=new google.maps.places.Autocomplete(e,n);google.maps.event.addListener(o,"place_changed",function(){console.log(y),y.action.text.value=o.getPlace().name,y.action.text.location=o.getPlace().formatted_address.split(" ")[o.getPlace().formatted_address.split(" ").length-1],$("#location").focus()})}},1e3)},t.delay||0)})}if(n=n||{},!e)throw Error("BotUI: Container id is required as first argument.");if(!document.getElementById(e))throw Error("BotUI: Element with id #"+e+" does not exist.");if(!t.Vue&&!n.vue)throw Error("BotUI: Vue is required but not found.");var m,f,v,b={debug:!1,fontawesome:!0},p={},g={icon:/!\(([^\)]+)\)/gim,image:/!\[(.*?)\]\((.*?)\)/gim,link:/\[([^\[]+)\]\(([^\)]+)\)(\^?)/gim};t.Vue=t.Vue||n.vue;for(var h in b)n.hasOwnProperty(h)&&(b[h]=n[h]);t.Promise||Promise||options.promise||s("https://cdn.jsdelivr.net/es6-promise/4.1.0/es6-promise.min.js");var x={template:'<div class="botui botui-container" v-botui-container><div class="botui-messages-container"><div v-for="msg in messages" class="botui-message" :class="msg.cssClass" v-botui-scroll><transition name="slide-fade"><div v-if="msg.visible" :class="[{human: msg.human, \'botui-message-content\': true}, msg.type]"><span v-if="msg.type == \'text\'" v-text="msg.content" v-botui-markdown></span> <iframe v-if="msg.type == \'embed\'" :src="msg.content" frameborder="0" allowfullscreen></iframe></div></transition></div></div><div class="botui-actions-container"><transition name="slide-fade"><div v-if="action.show" v-botui-scroll><form v-if="action.type == \'text\'" class="botui-actions-text" @submit.prevent="handle_action_text()" :class="action.cssClass"><i v-if="action.text.icon" class="botui-icon botui-action-text-icon fa" :class="\'fa-\' + action.text.icon"></i> <input type="text" ref="input" :type="action.text.sub_type" v-model="action.text.value" class="botui-actions-text-input" :placeholder="action.text.placeholder" :size="action.text.size" :value="action.text.value" :class="action.text.cssClass" :id="action.text.id" required v-focus/> <button v-if="isMobile" class="botui-actions-text-submit">Go</button></form><div v-if="action.type == \'button\'" class="botui-actions-buttons" :class="action.cssClass"> <button type="button" :class="button.cssClass" class="botui-actions-buttons-button" v-for="button in action.button.buttons" @click="handle_action_button(button)" autofocus><i v-if="button.icon" class="botui-icon botui-action-button-icon fa" :class="\'fa-\' + button.icon"></i> {{button.text}}</button></div></div></transition></div></div>',data:function(){return{action:{text:{size:30,placeholder:"Write here .."},button:{},show:!1,type:"text",autoHide:!0,addMessage:!0},messages:[]}},computed:{isMobile:function(){return t.innerWidth&&t.innerWidth<=768}},methods:{handle_action_button:function(t){a(t.text),v({type:"button",text:t.text,value:t.value})},handle_action_text:function(){this.action.text.value&&(a(this.action.text.value),v({type:"text",value:this.action.text.value,location:this.action.text.location}),this.action.text.value="")}}};t.Vue.directive("botui-markdown",function(t,e){"false"!=e.value&&(t.innerHTML=i(t.textContent))}),t.Vue.directive("botui-scroll",{inserted:function(t){f.scrollTop=f.scrollHeight}}),t.Vue.directive("focus",{inserted:function(t){t.focus()}}),t.Vue.directive("botui-container",{inserted:function(t){f=t}}),m=new t.Vue({components:{"bot-ui":x}}).$mount("#"+e);var y=m.$children[0];return p.message={add:function(t){return c(u(t))},bot:function(t){return t=u(t),c(t)},human:function(t){return t=u(t),t.human=!0,c(t)},get:function(t){return Promise.resolve(y.messages[t])},remove:function(t){return y.messages.splice(t,1),Promise.resolve()},update:function(t,e){return y.messages[t].content=e.content,Promise.resolve(e.content)},removeAll:function(){return y.messages.splice(0,y.messages.length),Promise.resolve()}},p.action={show:d,hide:function(){return y.action.show=!1,Promise.resolve()},text:function(t){return l(t),y.action.text=t.action,d(t)},button:function(t){return l(t),t.type="button",y.action.button.buttons=t.action,d(t)}},b.fontawesome&&s("https://use.fontawesome.com/ea731dcb6f.js"),b.debug&&(p._botApp=m),p}});